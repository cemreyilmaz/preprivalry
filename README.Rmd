---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# preprivalry

<!-- badges: start -->
[![Travis build status](https://travis-ci.com/cemreyilmaz/preprivalry.svg?branch=master)](https://travis-ci.com/cemreyilmaz/preprivalry)
<!-- badges: end -->

The goal of preprivalry is the preprocessing of binocular rivalry data
which were collected via PsychToolbox in MATLAB environment in the project by 
NeuroVision research group in the University of Graz. A rivalry data-set can be 
preprocessed by using this package if it is organized as required.

## Installation

You can install the released version of preprivalry from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("preprivalry")
```

## Example

The subject data can be preprocessed by using only one function:

```{r prep-example}
library(preprivalry)
## basic example for preprocessing of subject data
directory <- paste(getwd(), '/tests', sep='')
exp_list <- c('RivalryGratings','RivalryImages')
subj <- 's001'
ses <- 1
data <- preprocessing_subject(directory,exp_list,subj,ses)
```

The output can be saved also as an excel file after organizing as a table:
```{r table-example}
library(preprivalry)
## basic example for saving as csv
directory <- paste(getwd(), '/tests',sep='')
output_file <- paste(directory, '/data.csv', sep='')
exp_list <- c('RivalryGratings','RivalryImages')
subj <- 's001'
ses <- 1
raw_data <- read_rivdata(directory,exp_list[1],subj,'session1')
percept_keys <- rbind(raw_data[["log"]][[4]][[1]],
                      c(raw_data[["log"]][[4]][[2]][[1]][[1]],raw_data[["log"]][[4]][[2]][[2]][[1]]))
data <- preprocessing_subject(directory,exp_list,subj,ses)
data <- reorganize_as_table(data)
```

Check the function file preprivalry_preprocessing_data.R to see more details and 
to customize the work flow. 

## Visualization
After preprocessing, the data can be visualized to check the key events, percept
duration, and eye dominance. There is a set of visualization functions in the
package. One can use those functions to visualize the data in a specified trial,
run, and/or session. 

### Example
The input for the visualization functions is the same: data, session#, run#, 
trial#. One can visualize the data for a run or a trial. Although one does not
have to, we recommend to specify at least session and run since the output would
be little messy and not useful for interpretation.

```{r vis-example}
library(preprivalry)
## basic example for preprocessing of subject data
directory <- paste(getwd(), '/tests', sep='')
exp_list <- c('RivalryGratings','RivalryImages')
subj <- 's001'
ses <- 1
data <- preprocessing_subject(directory,exp_list,subj,ses)
plot_keyevents(data,1,1,1)
plot_perceptdurations(data,1,1,1)
hist_perceptdurations(data,1,1,1)
bar_stats(data,1,1,1)
```
