---
title: "MATLAB to R"
author: "Cemre Yilmaz"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{matlab_to_r}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(preprivalry)
```
# Data structure

Since our data were collected on MATLAB, this package includes some functions to
reorganize the data.

## MATLAB data

Our .mat file includes a MATLAB structure named as "log". Besides the other 
variables, its forth component is a struct containing the key events and fifth 
component is a struct containing the experiment info, as the following:

```
raw_data
  --raw_data.key
    --raw_data.key.perceptKeys  # key codes of instructed keys  [key_1, key_2]
    --raw_data.key.perceptNames # key names of instructed keys  {key_1, key_2}
    --raw_data.key.idDown       # key codes of pressed keys     [nx1 double]
    --raw_data.key.timeDown     # time points for pressed keys  [nx1 double]
    --raw_data.key.idUp         # key codes of released keys    [nx1 double]
    --raw_data.key.timeUp       # time points for released keys [nx1 double]
  --raw_data.exp
    --raw_data.exp.trialStartTime # [trial_1, trial_2]
    --raw_data.exp.trialEndTime   # [trial_1, trial_2]
```

We saved separate .mat files for each experimental run by naming the file as:
ExperimentName_s###_session#_run#_date.mat

## Import the data from a .mat file
One can import the data by using read_rivdata() function. First, it checks if 
the file exists. If it exits, it creates the full path of it and read it. If an 
error comes up, it warns the user.


```
directory <- "C:/Users/user/Documents/transriv/data"
data <- preprivalry::read_rivdata(directory,"Gratings","s001",1)

```
